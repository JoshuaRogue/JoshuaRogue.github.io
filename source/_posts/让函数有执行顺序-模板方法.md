---
title: 让函数有执行顺序-模板方法模式
date: 2018-1-15 12:02:04
categories: 设计模式
---

> 我们知道在一般情况下，Android中Activity的生命周期如图所示

![1.PNG](https://i.loli.net/2018/01/17/5a5f170714b1e.png)

执行顺序为onCreate()->onStart()->onResume()->onPause()->onStop()->onDestroy()，这个就是模板方法模式的使用之一

我们可以来模拟以下Activity所使用的模板方法模式，具体步骤如下：

#### 抽象类：定义算法框架，也就是执行顺序

```
public abstract class AbstractActivity {
    protected void onCreate() {
        System.out.println("onCreate()");
    }

    protected void onStart() {
        System.out.println("onStart()");
    }

    protected void onResume() {
        System.out.println("onResume()");
    }

    protected void onPause() {
        System.out.println("onPause()");
    }

    protected void onStop() {
        System.out.println("onStop");
    }

    protected void onDestroy() {
        System.out.println("onDestroy");
    }

    public final void work() {
        onCreate();
        onStart();
        onResume();
        onPause();
        onStop();
        onDestroy();
    }
}
```

#### 实现类

1. MainActivity
```
public class MainActivity extends AbstractActivity {
    @Override
    protected void onCreate() {
        super.onCreate();
        System.out.println("This is MainActivity");
    }
}
```

2. SecondActivity
```
public class SecondActivity extends AbstractActivity {
    @Override
    protected void onCreate() {
        super.onCreate();
        System.out.println("This is SecondActivity");
    }
}
```

使用如下：

```
public class Main {
    public static void main(String[] args) {
        MainActivity mainActivity = new MainActivity();
        mainActivity.work();
        SecondActivity secondActivity = new SecondActivity();
        secondActivity.work();
    }
}
```

运行结果

![2.PNG](https://i.loli.net/2018/01/17/5a5f1b4321431.png)

> 这里只是简单地举了个模板方法模式的小例子，我们还可以在不同的实现类加上函数，如登陆函数等等，这样一个模板方法就可以被大范围地使用
---
title: 对象内部的策略改变-状态模式
date: 2018-1-18 12:02:04
categories: 设计模式
---

> 状态模式比较常见的是运用在登陆或未登陆的情况下进行，因为在用户登陆与未登陆这两种情况下，对相同的动作会有不同的反应

状态模式的使用一般分为以下几步

##### 定义状态接口以及相应的动作

```
public interface State {
    void statement();
    void report();
}
```

##### 定义每种不同的状态相应的动画

1. 登陆状态时的动作
```
public class LogOnState implements State {
    @Override
    public void statement() {
        System.out.println("statement  fail");
    }

    @Override
    public void report() {
        System.out.println("report fail");
    }
}
```

2. 未登陆状态时的动作

```
public class LogOutState implements State {
    @Override
    public void statement() {
        System.out.println("statement success");
    }

    @Override
    public void report() {
        System.out.println("report success");
    }
}
```

##### 定义状态所对应的实体类，比如说这里的User类

```
public class User {
    private State state = new LogOutState();
    public User() {
    }

    private void setState(State state) {
        this.state = state;
    }

    public void LogOn() {
        setState(new LogOnState());
    }

    public void LogOut() {
        setState(new LogOutState());
    }

    public void statement() {
        state.statement();
    }

    public void report() {
        state.report();
    }
}
```

> 这里定义了一个默认的状态就是未登陆的，这和实际中的场景相似

##### 实现代码如下：

```
public class Main {
    public static void main(String[] args) {
        User user = new User();
        user.statement();
        user.report();
        user.LogOn();
        user.statement();
        user.report();
    }
}
```

> 当然，这里只是最简单的示例，在实际开发过程中状态模式的作用这里还没有体现出来，总结来说就是，策略模式时去掉了在“外部的”if-else，而状态模式则是去掉了内部的”“if-else，两种设计模式的不同就是：在策略模式下，策略是由用户选择的，而在状态模式下，策略则是由类内部自动改变，不需要用户的干预，适合于像处理用户的登陆状态与未登陆状态这样的情况。